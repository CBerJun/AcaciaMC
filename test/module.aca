# Test file for modules in Acacia

#* math: Math utilities *#
import math
x = math.randintc(1, 10)  # Random integer between 1 ~ 10
y = math.pow(2, x)  # 2 to the power of `x`
x = math.max(x, y, 50)  # Maximum of all the given arguments

#* print: Output and formatting *#
import print
fs1 -> print.format("ab%1cd%%%{a}%x%{0}", x, y, a=1)
# Usage of % escape is similar to this in Python
print.tell(fs1)
fs2 -> print.format("an%0", x)
s -> "some string"
print.tell(print.format("fs1: %0, fs2: %1, s: " + s, fs1, fs2), "@p")
print.title(fs2)
print.title(s, target="@p", mode=print.ACTIONBAR, stay_time=100)
print.title_clear("@p")
# Localization keys
print.tell(print.format("Give me 10 %k0", "item.diamond.name"))

#* schedule: Working through several ticks *#
import schedule
x = 10
def foo():
    x += 1
task -> schedule.Task(foo)
task.after(20)

def foo2(n: int):
    x += n
schedule.register_loop(foo2, interval=5, n=1)

#* Importing another Acacia program *#
# Import `mod` module from current directory and rename it as `testmod`
import .mod as testmod
# Import `mod.test` as `test_function`
from .mod import test as test_function
# Import everything from `mod`
from .mod import *
# The following lines all call the same function
b = testmod.test(-10)
b = test_function(-10)
b = test(-10)

#* Importing a module written in Python *#
import .test_mod
entity X:
    pass
ent = X()
test_mod.foo(x, g=ent, z="\u0030", k=10, m="ss", l=1)
test_mod.bar(1)
test_mod.extbar()
